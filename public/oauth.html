<!DOCTYPE html>
<html>
  <head>
    <title>Figma OAuth Redirect</title>
  </head>
  <body>
    <h1>Hi this is your token</h1>
    <script>
  // Read the token from the hash, not the search query
  const hashParams = new URLSearchParams(window.location.hash.substring(1));
  const token = hashParams.get('token');
  console.log('[oauth.html] Token received from hash:', token);

  if (token) {
    console.log('[oauth.html] Sending token to parent...');
    parent.postMessage({ pluginMessage: { type: 'oauth-token', token } }, '*');
  } else {
    console.error('[oauth.html] No token found in hash!');
  }
</script>

  </body>
</html>
